<custom-header [options]="vm.header"></custom-header>

<ion-content
    [fullscreen]="true"
    class="animate__animated animate__fadeIn animate__faster"
>
    <spinner [loading]="vm.loading"></spinner>
    <ion-row style="padding-top: 0" *ngIf="vm.car">
        <ion-col size="12" sizeLg="8" offsetLg="2">
            <ion-card mode="ios" (click)="openImage(vm.image)" button>
                <div
                    *ngIf="vm.image"
                    class="div-image-one"
                    [ngStyle]="{'background-image': 'url(' + vm.image + ')'}"
                ></div>
            </ion-card>

            <ion-card mode="ios">
                <ion-card-title
                    class="ion-text-center title"
                    style="padding-top: 0.75rem"
                >
                    {{ vm.car.brand?.name }} {{ vm.car.model }}
                    <br />
                    <div class="custom-chip custom-chip-dark">
                        <span>{{ vm.car.driver.name }}</span>
                    </div>
                </ion-card-title>
                <hr />
                <ion-card-content style="padding: 0.5rem">
                    <ion-row>
                        <ion-col size="4" class="ion-text-center">
                            <small>AÃ±o</small>
                            <p>{{ vm.car.year }}</p>
                        </ion-col>
                        <ion-col size="4" class="ion-text-center">
                            <small>Combustible</small>
                            <p>
                                {{ vm.car.fuel !== '' ? vm.car.fuel : 'N/D' }}
                            </p>
                        </ion-col>
                        <ion-col size="4" class="ion-text-center">
                            <small>Traccion</small>
                            <p>{{ vm.car.traction }}</p>
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col size="4" class="ion-text-center">
                            <small>CC</small>
                            <p>{{ vm.car.cc }}</p>
                        </ion-col>
                        <ion-col size="4" class="ion-text-center">
                            <small>CV</small>
                            <p>{{ vm.car.cv }}</p>
                        </ion-col>
                        <ion-col size="4" class="ion-text-center">
                            <small>De serie</small>
                            <p>{{ vm.car.stock ? 'Si' : 'No' }}</p>
                        </ion-col>
                    </ion-row>
                    <hr />
                    <car-totals
                        [likes]="vm.car?.likes"
                        [gold]="vm.car?.gold"
                        [silver]="vm.car?.silver"
                        [bronze]="vm.car?.bronze"
                        [votes]="vm.car?.votes"
                    ></car-totals>
                </ion-card-content>
            </ion-card>

            <ion-card
                *ngIf="!vm.isMyCar"
                mode="ios"
                button
                (click)="likeOrDislike()"
            >
                <ion-card-content
                    class="like"
                    *ngIf="!vm.liked || vm.liked && vm.user "
                >
                    <ion-icon [name]="vm.liked ? 'close': 'heart'"></ion-icon>
                    <ion-label>
                        {{ !vm.liked ? 'Me gusta' : 'Ya no me gusta' }}
                    </ion-label>
                    <small *ngIf="!vm.liked">
                        Ayuda a {{ vm.car.driver.name }} a tener mas visibilidad
                    </small>
                    <small *ngIf="vm.liked">
                        Dejaras de ayudar a {{ vm.car.driver.name }} a tener
                        visibilidad
                    </small>
                </ion-card-content>
            </ion-card>
        </ion-col>
    </ion-row>
</ion-content>
