<custom-header
    [options]="vm.header"
    (segmentChanged)="segmentChanged($event)"
></custom-header>

<ion-content [fullscreen]="true" [scrollEvents]="true">
    <spinner [loading]="vm.loading.getOne"></spinner>
    <no-items
        *ngIf="vm.header.segments.selected === 1 && !vm.loading.getInscriptionsOfTournament && vm.inscriptions.length === 0"
        [options]="vm.noitems"
    ></no-items>
    <ion-row style="padding-top: 0" *ngIf="vm.tournament">
        <ion-col size="12" sizeLg="8" offsetLg="2">
            <div
                *ngIf="vm.header.segments.selected === 0"
                class="animate__animated animate__fadeIn animate__faster"
            >
                <ion-card
                    mode="ios"
                    *ngIf="vm.image"
                    (click)="openImage(vm.image)"
                    button
                >
                    <div
                        class="div-image-one"
                        [ngStyle]="{'background-image': 'url(' + vm.image + ')'}"
                    ></div>
                </ion-card>

                <tournament-info
                    [cols]="vm.cols"
                    [buttonInscription]="vm.buttonInscription"
                    [tournament]="vm.tournament"
                    [inscriptions]="vm.inscriptions"
                    (inscriptionCarClick)="inscriptionCar()"
                ></tournament-info>

                <tournament-winners
                    *ngIf="vm.winners"
                    [winners]="vm.winners"
                    (clickItem)="goToCar($event)"
                >
                </tournament-winners>

                <ion-card
                    mode="ios"
                    *ngIf="vm.tournament.status === 'InProgress' || vm.tournament.status === 'Completed'"
                >
                    <ion-item
                        color="light"
                        mode="ios"
                        [button]="true"
                        lines="none"
                        (click)="goToRounds()"
                    >
                        <ion-label>
                            <h2>Rondas</h2>
                            <small class="min-text-weight">
                                Accede a las rondas del torneo
                            </small>
                        </ion-label>
                    </ion-item>
                </ion-card>

                <tournament-my-inscriptions
                    *ngIf="vm.tournament.status === 'InProgress' || vm.tournament.status === 'Todo'"
                    [myCars]="vm.myCars"
                    (confirmDeleteInscriptionClick)="confirmDeleteInscription($event)"
                >
                </tournament-my-inscriptions>
            </div>

            <div
                *ngIf="vm.header.segments.selected === 1"
                class="animate__animated animate__fadeIn animate__faster"
                style="margin-top: -0.25rem"
            >
                <car-item
                    *ngFor="let inscription of vm.inscriptions"
                    [car]="inscription?.car"
                    (clickItem)="goToCar($event)"
                ></car-item>
            </div>
            <div
                *ngIf="vm.header.segments.selected === 2"
                class="animate__animated animate__fadeIn animate__faster"
            >
                <tournament-rounds
                    [tournamentId]="vm.tournament._id"
                ></tournament-rounds>
            </div>
        </ion-col>
    </ion-row>
</ion-content>
